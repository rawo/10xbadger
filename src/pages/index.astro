---
/**
 * Landing Page
 *
 * Public-facing landing page for 10xBadger.
 * Showcases features and benefits with a clear call-to-action.
 * No authentication required - redirects authenticated users to dashboard.
 */

import Layout from "../layouts/Layout.astro";
import { HeroSection } from "@/components/landing/HeroSection";
import { FeaturesSection } from "@/components/landing/FeaturesSection";
import { Footer } from "@/components/landing/Footer";
import { getAuthenticatedUser } from "@/lib/auth/server-auth";

// Check if user is already authenticated
let user = null;
try {
  user = await getAuthenticatedUser(Astro);
  // If authenticated, redirect to dashboard
  if (user) {
    return Astro.redirect("/dashboard");
  }
} catch {
  // User is not authenticated - continue showing landing page
}
---

<Layout title="10xBadger - Career Growth Made Simple">
  <main class="min-h-screen">
    <!-- Hero Section -->
    <HeroSection client:load />

    <!-- Features Section -->
    <FeaturesSection client:load />

    <!-- Call to Action Section -->
    <section class="bg-gradient-to-r from-blue-600 via-purple-600 to-orange-600 py-16 text-white md:py-20">
      <div class="container mx-auto px-4 text-center">
        <h2 class="mb-4 text-3xl font-bold tracking-tight sm:text-4xl md:text-5xl">Ready to Transform Your Career?</h2>
        <p class="mx-auto mb-8 max-w-2xl text-lg opacity-90 md:text-xl">
          Join professionals who are already using 10xBadger to track their achievements and accelerate their career
          growth.
        </p>
        <div class="flex flex-col items-center justify-center gap-4 sm:flex-row">
          <a
            href="/login"
            class="inline-flex items-center justify-center gap-2 rounded-md bg-white px-8 py-3 text-lg font-medium text-blue-600 shadow-lg transition-all hover:bg-gray-100 hover:shadow-xl"
          >
            Sign In
            <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
            </svg>
          </a>
          <a
            href="/register"
            class="inline-flex items-center justify-center gap-2 rounded-md border-2 border-white px-8 py-3 text-lg font-medium text-white transition-all hover:bg-white/10"
          >
            Create Account
          </a>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <Footer client:load />
  </main>
</Layout>

<style>
  /* Custom grid background pattern */
  .bg-grid-slate-100 {
    background-image:
      linear-gradient(to right, rgb(241 245 249 / 0.5) 1px, transparent 1px),
      linear-gradient(to bottom, rgb(241 245 249 / 0.5) 1px, transparent 1px);
    background-size: 24px 24px;
  }

  .dark .bg-grid-slate-700\/25 {
    background-image:
      linear-gradient(to right, rgb(51 65 85 / 0.25) 1px, transparent 1px),
      linear-gradient(to bottom, rgb(51 65 85 / 0.25) 1px, transparent 1px);
    background-size: 24px 24px;
  }
</style>
